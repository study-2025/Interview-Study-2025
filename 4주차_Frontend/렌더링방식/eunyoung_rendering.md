웹 애플리케이션을 구축할 때는

- 성능 최적화
- 사용자 경험 개선
- 검색 엔진 가시성 향상

을 위해 올바른 렌더링 전략을 선택하는 것이 중요하다.

렌더링 전략에는 CSR, SSR, SSG, ISR 방식이 존재한다.

이 4가지 방식은 **렌더링 준비**를 어디서 하느냐에 차이점을 두고 있다.

**렌더링 준비**란, 사용자에게 화면을 보여주기 위해 DB에서 필요한 데이터를 불러오고, 페이지 내부 구성을 위한 자바스크립트 파일을 다운로드 받는 등의 일련의 과정을 말한다. (Critical rendering path 의 렌더링 과정과 다른 의미)

렌더링 전략마다 렌더링 준비 과정이 상이하고, 이는 위에서 언급한 성능, 사용자 경험, 검색 엔진 가시성 등과 직결된다. 각 전략은 정답이 있는 것이 아니라 전략마다 장단점이 있으므로 이를 이해하고 적재적소에 활용하는 것이 중요하다.

이때 웹 애플리케이션을 구성하는 방식에는 MPA와 SPA의 두 가지 방식이 있다.

렌더링 전략에 따라 웹 애플리케이션 구성 방식이 달라지기 때문에 이에 대해 이해할 필요가 있다.

# 웹 애플리케이션 구성 방식

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2b6748e-ba74-4d54-a235-94c36f9d61cb/cc3b145e-e9bc-42a5-9920-0a9d45a962c0/Untitled.png)

https://lsh2016.tistory.com/142

## MPA (multiple page application)

MPA는 여러 개의 페이지로 구성된 애플리케이션이다. 페이지 별로 HTML 문서를 두어 페이지를 이동할 때마다 새로운 HTML 문서를 받아와서 새로 렌더링 하는 전통적인 웹페이지 구성 방식이다.

즉 링크를 클릭한다거나 버튼을 눌러서 페이지 내용이 변경되어야 할 때는 새로운 HTML 파일을 다시 받아와 전체 페이지를 리로딩하는 방식이다.

참고로 HTML 문서는 완성된 형태로 서버에 배포되어 있고, 이를 전달 받기 때문에 클라이언트는 완성된 형태의 HTML 파일을 받아서 화면에 렌더링만 하면 된다.

MPA 방식의 장단점은 다음과 같다.

**장점**

- SEO 관점에서 유리하다. 검색 엔진 봇은 완성된, 즉 모든 정보가 포함된 HTML 문서를 볼 수 있기 때문에 관련 키워드를 수집하기 좋다.
- 초기 구동 속도가 빠르다.

**단점**

- 매번 페이지 전체를 새로 불러오기 때문에 페이지 깜빡임 현상이 발생한다. 따라서 사용자 경험이 저하된다.
- 개발하기 복잡하고 일관성 있는 페이지 구성이 어렵다.

## SPA (single page application)

SPA는 단일 페이지로 구성된 애플리케이션이다. 즉 하나의 HTML 문서를 사용하고 초기 로드 할 때 필요한 모든 자원을 받아온 후, 페이지 간의 전환 시 새로 고침 없이 필요한 데이터 만을 받아와 자바스크립트를 활용해 동적으로 페이지를 업데이트 하는 방식이다.

SPA 방식의 장단점은 다음과 같다.

**장점**

- 전체 페이지가 아니라 필요한 요소만 업데이트 하므로 MPA에서 발생했던 깜빡임 문제가 해결된다. 따라서 원활한 사용자 경험을 제공할 수 있다.
- 개발하기 쉬어 생산성이 증대된다.

**단점**

- SEO에 유리하지 못하다. 검색 엔진 봇이 직접 버튼을 누르는 액션은 하지 않으므로 노출되지 않은 정보는 수집하지 못한다.
- 초기 구동 속도가 느리다.

이제 MPA와 SPA 방식을 이해했으니 웹 애플리케이션의 역사의 흐름을 통해 각 렌더링 방식의 차이점을 알아보자.

# 웹 애플리케이션의 역사와 렌더링 방식

## 전통적인 렌더링 방식

1990년 중반까지 웹사이트는 모두 정적이었다.

서버에 완성된 HTML 문서들이 배포되어 있고, 사용자가 특정 주소에 접속하면 서버에 배포되어 있는 HTML 형식 파일을 받아와서 보여주는 형식으로 렌더링이 이루어졌다.

그러나 이 방식에는 **페이지 깜빡임 문제**가 있었다.

페이지 내에서 다른 링크를 클릭하면 다시 서버에서 해당 페이지의 HTML을 받아와 페이지 전체가 업데이트 되므로 다른 페이지로 이동할 때마다 페이지가 깜빡이는 현상이 있었던 것이다.

## iframe tag

그러다 1996년에 iframe 태그가 생기고 페이지 내에서 부분적으로 문서를 받아와서 업데이트 할 수 있는 방법이 생기게 된다. 이를 테면 네비게이션 바의 HOME 버튼을 누르면 HOME과 관련된 HTML 문서를 부분적으로 보여주는 방식이다.

## XMLHttpRequest API

그리고 1998년도 이후 XMLHttpRequest API가 개발되었다. XMLHttpRequest API는 자바스크립트를 통해 서버와 브라우저 비동기 방식으로 데이터를 주고 받을 수 있게 해주는 통신 기술이다. 따라서 이 API를 사용하여 HTML 문서 전체가 아니라 JSON 같은 포맷으로 **서버에서 가볍게 필요한 데이터만 받아올 수 있게** 되었다.

따라서 이를 활용해 필요한 데이터를 받아오고, 받아온 데이터를 자바스크립트를 이용해서 동적으로 HTML 요소를 생성하여 페이지에 업데이트 할 수 있게 되었다.

## AJAX (Asynchronous JavaScript and XML)

2005년 이러한 방식을 공식적으로 AJAX라고 명명하였고, 구글에서는 이러한 AJAX 기술을 이용하여 Gmail, Google Maps와 같은 서비스를 만들었다. 이때 XMLHttpRequest API 의 활용성이 주목 받게 되어 SPA의 시대가 본격적으로 시작되었다.

AJAX 방식을 사용하게 되면서, 사용자가 한 페이지 내에서 머무르면서 필요한 데이터를 서버에서 받아와 부분적으로만 업데이트 할 수 있게 되었다. 이러한 방식으로 하나의 어플리케이션을 사용 하듯 웹사이트도 사용성이 좋아졌다.

이런 방식으로 쉽게 어플리케이션을 구성할 수 있도록 react, vue, angular와 같은 프레임 워크들이 등장하게 되었다. 이로써 CSR 시대가 시작되었다.

## CSR (Client side rendering)

![https://d2.naver.com/helloworld/7804182](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2b6748e-ba74-4d54-a235-94c36f9d61cb/411e01a1-9f8b-47d4-915b-d7acbd18b02a/Untitled.png)

https://d2.naver.com/helloworld/7804182

이처럼 초기 로딩 시 정적 파일을 받아와 클라이언트 측에서 페이지를 동적으로 렌더링 하는 전략을 CSR이라고 한다.

CSR 렌더링 과정을 좀 더 자세히 살펴보자면,

1. 서버에서 HTML 파일을 전해주는데 HTML 파일 안에는 HTML 문서 정보가 없고, 필요한 파일의 링크만 들어있다.
2. 그래서 CSR 페이지를 처음 접속하면 빈 화면만 보이게 된다. 클라이언트는 다시 HTML에 링크된 자바스크립트를 서버로부터 다운로드 받게 된다.
3. 이 자바스크립트 파일에는 어플리케이션에 필요한 로직들 뿐만 아니라 어플리케이션을 구동하는 프레임워크와 라이브러리의 소스 코드들도 다 포함되어있다.
   1. 그렇기에 굉장히 사이즈가 커서 다운로드 받는데 꽤 시간이 소요된다.
4. 자바스크립트 파일을 다운로드 받으면 동적으로 HTML 요소가 생성되어 비로소 사용자는 페이지를 볼 수 있게 되고, 페이지와 상호작용 할 수 있게 된다.

이러한 CSR 방식의 장단점은 다음과 같다.

**장점**

- 페이지의 일부만 변경되므로 페이지 깜빡임 현상이 해결된다.
- 클라이언트 측에서 동적으로 페이지를 변경하기 때문에 서버 부하가 줄어든다.
- 초기 로드 이후에는 다른 페이지를 로드하는 속도가 빠르다.

**단점**

- 사용자가 첫 화면을 보기까지 시간이 오래 걸린다.
- SEO에 유리하지 못하다. 검색 엔진이 빈 HTML 파일을 보게 되므로 CSR로 작성된 웹페이지를 분석하는 데 어려움을 겪고 있다. 최근 구글에서는 CSR 방식의 웹페이지의 자바스크립트를 실행 시켜서 키워드를 수집할 수 있도록 개선하였다고 하지만 여전히 SEO 측면에서 유리하지 못하다.

## SSR (Server side rendering)

![https://d2.naver.com/helloworld/7804182](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2b6748e-ba74-4d54-a235-94c36f9d61cb/e14f88b6-8150-4455-a115-84e4e31f4e7d/Untitled.png)

https://d2.naver.com/helloworld/7804182

CSR 방식의 초기 로딩 속도 문제를 개선하기 위해 SSR 전략이 탄생한다.

클라이언트에서 모든 과정을 처리하는 CSR과 달리, 요청이 있을 때 서버에서 필요한 데이터를 미리 가져와 HTML 파일을 만들고 잘 만들어진 HTML 파일을 보내주는 방식이다.

따라서 클라이언트는 화면을 바로 볼 수 있다. 그러나 자바스크립트는 HTML 문서를 받은 뒤 다운로드 하기 때문에 로드된 페이지와 상호작용하기까지 시간이 걸릴 수 있다.

이러한 SSR 방식의 장단점은 다음과 같다.

**장점**

- SSR은 CSR보다 초기 페이지 로딩 속도가 빠르다.
- 모든 컨텐츠가 HTML 파일에 들어있기 때문에 조금 더 효율적인 SEO가 가능하다.

**단점**

- Static Site에 존재했던 깜빡임 문제가 여전히 존재한다.
  사용자가 클릭하면 전체적인 웹사이트를 다시 서버에서 받아오는 것과 동일하기 때문에 사용자 경험이 좋지 않을 수 있다.
- 서버 과부하가 올 수 있다.
  특히 사용자가 많은 제품일수록 사용자가 클릭을 할 때마다 서버에 데이터 요청을 해서 서버에서 필요한 데이터를 가지고 와서 HTML을 만들어와야 하므로 서버 과부하가 쉬움
- 사용자가 빠르게 웹사이트를 확인할 수는 있지만 동적 처리 자바스크립트를 다운 받지 못해서 여기저기 클릭했는데 아무런 반응이 없을 수도 있다.

## SSG (Static Site Generation)

SSG는 빌드 시점에 전체 웹사이트를 사전 렌더링하여 각 페이지에 대한 정적 HTML 파일을 생성하는 렌더링 전략이다. 따라서 클라이언트 요청 시에 빌드 시점에 생성된 HTML 파일을 제공한다.

장점:

- 초기 로딩 속도가 매우 빠르다.
- 서버 부하가 거의 없다.
- SEO에 매우 유리하다.
- 정적인 사이트를 구축할 때 좋은 효율을 낼 수 있다.

단점:

- 동적 데이터에 대한 업데이트가 어렵다. 페이지 내용을 변경하려면 변경한 내용을 다시 빌드해야 한다.
- 모든 페이지를 사전에 생성해야 하므로 빌드 시간이 길어진다.

## ISR (Incremental Static Regeneration)

ISR은 증분 정적 재생이라고 번역되는데, SSG의 한계를 극복하기 위한 렌더링 전략이다.

SSG는 페이지의 변경 내용을 반영하려면 다시 빌드해야 한다는 단점이 존재했는데, ISR 방식을 사용하면 특정 기간이 지나면 변경된 페이지에 대해 다시 빌드 하여 최신 내용을 반영한 페이지를 생성할 수 있다.

ISR의 장단점은 다음과 같다.

**장점**

- 페이지 로딩 속도가 빠르다.
- SEO 친화적이다.
- 최신 내용을 주기적으로 반영한다.

**단점**

- 실시간 데이터는 아니다.
- 유저별 데이터 제공은 어렵다.

## 각 렌더링 전략 비교

![https://merce.com/blog/pre-rendering-renderowanie-wstepne-ssr-ssg-isr-csr-w-next-js](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2b6748e-ba74-4d54-a235-94c36f9d61cb/e631985c-07c9-48bd-b7e4-033a9d31b890/Untitled.png)

https://merce.com/blog/pre-rendering-renderowanie-wstepne-ssr-ssg-isr-csr-w-next-js

# Reference

[WTF Do These Even Mean](https://www.youtube.com/watch?v=p02AIAoImzU&t=20s)

[Understanding CSR, SSR, SSG, and ISR: A Next.js Perspective](https://bootcamp.uxdesign.cc/understanding-csr-ssr-ssg-and-isr-a-next-js-perspective-fcaf36686de6)

[Next.js SSR vs. SSG vs. ISR vs. CSR | Next.js Data Fetching](https://www.youtube.com/watch?v=mWytwmxLKmo)

[서버사이드 렌더링 (개발자라면 상식으로 알고 있어야 하는 개념 정리 ⭐️)](https://www.youtube.com/watch?v=iZ9csAfU5Os&pp=ygUcQ1NSLCBTU1IsIE1QQSwgU1BBLCBJU1IsIFNTRw==)

[SSR과 CSR 이 영상 하나로 끝내기! (SEO 해결 포함)](https://www.youtube.com/watch?v=D71ByEIBWEs&t=17s)
